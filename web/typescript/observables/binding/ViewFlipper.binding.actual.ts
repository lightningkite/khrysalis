// Generated by Khrysalis TypeScript converter - this file will be overwritten.
// File: observables/binding/ViewFlipper.binding.actual.kt
// Package: com.lightningkite.khrysalis.observables.binding
// FQImport: android.widget.ViewFlipper.displayedChild TS displayedChild
// FQImport: android.widget.ViewFlipper.inAnimation TS inAnimation
// FQImport: android.widget.ProgressBar.indeterminateDrawable TS indeterminateDrawable
// FQImport: android.widget.ViewFlipper.childCount TS childCount
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.<anonymous>.it TS it
// FQImport: android.graphics.LightingColorFilter TS LightingColorFilter
// FQImport: com.lightningkite.khrysalis.observables.subscribeBy>com.lightningkite.khrysalis.observables.ObservableProperty<kotlin.Any> TS comLightningkiteKhrysalisObservablesObservablePropertySubscribeBy
// FQImport: android.content.res.Resources.getColor TS getColor
// FQImport: android.widget.ViewFlipper.addView TS addView
// FQImport: com.lightningkite.khrysalis.views.ColorResource TS ColorResource
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.color TS color
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.spinner TS spinner
// FQImport: android.widget.ProgressBar TS ProgressBar
// FQImport: android.graphics.drawable.Drawable.colorFilter TS colorFilter
// FQImport: com.lightningkite.khrysalis.rx.until>io.reactivex.disposables.Disposable TS ioReactivexDisposablesDisposableUntil
// FQImport: android.view.animation.AlphaAnimation TS AlphaAnimation
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.<anonymous>.color TS color
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.loading TS loading
// FQImport: android.view.Gravity TS Gravity
// FQImport: android.view.Gravity.CENTER TS CENTER
// FQImport: android.view.animation.LinearInterpolator TS LinearInterpolator
// FQImport: android.view.ViewGroup.LayoutParams.WRAP_CONTENT TS WRAP_CONTENT
// FQImport: com.lightningkite.khrysalis.observables.ObservableProperty TS ObservableProperty
// FQImport: android.widget.ViewFlipper.outAnimation TS outAnimation
// FQImport: android.widget.FrameLayout TS FrameLayout
// FQImport: com.lightningkite.khrysalis.observables.binding.bindLoading.<anonymous>.colorValue TS colorValue
// FQImport: android.view.animation.AlphaAnimation.interpolator TS interpolator
// FQImport: com.lightningkite.khrysalis.rx.removed>android.view.View TS getAndroidViewViewRemoved
// FQImport: android.widget.ViewFlipper.context TS context
// FQImport: android.view.animation.AlphaAnimation.duration TS duration
// FQImport: android.widget.ViewFlipper.resources TS resources
import { comLightningkiteKhrysalisObservablesObservablePropertySubscribeBy } from './../ObservableProperty.ext.shared'
import { getAndroidViewViewRemoved, ioReactivexDisposablesDisposableUntil } from './../../rx/DisposeCondition.actual'
import { ObservableProperty } from './../ObservableProperty.shared'
import { SubscriptionLike } from 'rxjs'
import { also } from 'Kotlin'
import { ColorResource } from './../../views/ResourceTypes.actual'

//! Declares com.lightningkite.khrysalis.observables.binding.bindLoading>android.widget.ViewFlipper
export function androidWidgetViewFlipperBindLoading(this_: HTMLDivElement, loading: ObservableProperty<boolean>, color: (ColorResource | null) = null): SubscriptionLike{
    if (this_.inAnimation.equals(null)) this_.inAnimation = also(AlphaAnimation.constructorkotlinFloat, kotlinFloat(0, 1), (this_1) => {
            this_1.duration = 250;
            this_1.interpolator = LinearInterpolator.constructor();
    });
    if (this_.outAnimation.equals(null)) this_.outAnimation = also(AlphaAnimation.constructorkotlinFloat, kotlinFloat(1, 0), (this_1) => {
            this_1.duration = 250;
            this_1.interpolator = LinearInterpolator.constructor();
    });
    if (this_.childCount === 1) {
        const spinner = ProgressBar.constructorandroidcontentContext(this_.context);
        
        const temp399 = color;
        if(temp399 !== null) ((color) => {
                //TODO: Make this actually show the proper color. Currently it only makes it white.
                const colorValue = this_.resources.getColor(color);
                
                spinner.indeterminateDrawable.colorFilter = LightingColorFilter.constructorkotlinInt, kotlinInt(0xFFFFFFFF - colorValue, colorValue);
        })(temp399);
        this_.addView(spinner, 1, FrameLayout.LayoutParams.constructorkotlinInt, kotlinInt, kotlinInt(WRAP_CONTENT, WRAP_CONTENT, Gravity.CENTER));
    }
    ioReactivexDisposablesDisposableUntil(comLightningkiteKhrysalisObservablesObservablePropertySubscribeBy(loading, undefined, undefined, (it) => {
                this_.displayedChild = it ? 1 : 0
    }), getAndroidViewViewRemoved(this_));
}

