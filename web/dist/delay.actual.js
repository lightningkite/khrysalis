"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Generated by Khrysalis TypeScript converter
// File: delay.actual.kt
// Package: com.lightningkite.khrysalis
const rxjs_1 = require("rxjs");
const ApplicationAccess_actual_1 = require("./ApplicationAccess.actual");
//! Declares com.lightningkite.khrysalis.delay
function delay(milliseconds, action) {
    if (milliseconds === 0) {
        action();
    }
    else {
        setTimeout(action, milliseconds);
    }
}
exports.delay = delay;
//! Declares com.lightningkite.khrysalis.post
function post(action) {
    setTimeout(action);
}
exports.post = post;
//! Declares com.lightningkite.khrysalis.animationFrame
exports._animationFrame = new rxjs_1.Subject();
let active = false;
function getAnimationFrame() {
    if (active)
        return exports._animationFrame;
    active = true;
    let last = 0;
    requestAnimationFrame(function callback(ms) {
        if (last === 0) {
            last = ms;
        }
        const delta = (ms - last) / 1000;
        last = ms;
        exports._animationFrame.next(delta);
        if (exports._animationFrame.observers.length > 0) {
            requestAnimationFrame(callback);
        }
        else {
            active = false;
        }
    });
    return exports._animationFrame;
}
exports.getAnimationFrame = getAnimationFrame;
//! Declares com.lightningkite.khrysalis.applicationIsActive
function getApplicationIsActive() {
    return ApplicationAccess_actual_1.ApplicationAccess.INSTANCE.foreground;
}
exports.getApplicationIsActive = getApplicationIsActive;
//# sourceMappingURL=delay.actual.js.map