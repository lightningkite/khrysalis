"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Generated by Khrysalis TypeScript converter
// File: Image.loadingRx.actual.kt
// Package: com.lightningkite.khrysalis
const Image_shared_1 = require("./Image.shared");
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
//! Declares com.lightningkite.khrysalis.load>com.lightningkite.khrysalis.Image
function comLightningkiteKhrysalisImageLoad(this_) {
    return (() => {
        try {
            return (() => {
                if (this_ instanceof Image_shared_1.ImageRaw) {
                    return rxjs_1.from(createImageBitmap(new Blob([this_.raw])));
                }
                else if (this_ instanceof Image_shared_1.ImageReference) {
                    return rxjs_1.from(createImageBitmap(this_.uri));
                }
                else if (this_ instanceof Image_shared_1.ImageImageBitmap) {
                    return rxjs_1.of(this_.bitmap);
                }
                else if (this_ instanceof Image_shared_1.ImageRemoteUrl) {
                    return rxjs_1.from(fetch(this_.url))
                        .pipe(operators_1.flatMap((x) => { return x.blob(); }))
                        .pipe(operators_1.flatMap((x) => { return createImageBitmap(x); }));
                }
            })();
        }
        catch (_e) {
            let e = _e;
            return rxjs_1.throwError(e);
        }
    })();
}
exports.comLightningkiteKhrysalisImageLoad = comLightningkiteKhrysalisImageLoad;
//# sourceMappingURL=Image.loadingRx.actual.js.map