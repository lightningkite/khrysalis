// Generated by Khrysalis TypeScript converter
// File: delay.actual.kt
// Package: com.lightningkite.khrysalis
import { Subject } from 'rxjs'

//! Declares com.lightningkite.khrysalis.delay
export function delay(milliseconds: number, action: () => void) {
    if(milliseconds === 0){
        action();
    } else {
        setTimeout(action, milliseconds);
    }
}

//! Declares com.lightningkite.khrysalis.post
export function post(action: () => void) {
    setTimeout(action);
}

//! Declares com.lightningkite.khrysalis.animationFrame
export const _animationFrame: Subject<number> = new Subject();
let active = false;
export function getAnimationFrame(): Subject<number> {
    if(active) return _animationFrame;
    active = true;
    let last = 0;
    requestAnimationFrame(function callback(ms){
        if(last === 0) {
            last = ms;
        }
        const delta = (ms - last) / 1000;
        last = ms;
        _animationFrame.next(delta);
        if(_animationFrame.observers.length > 0){
            requestAnimationFrame(callback);
        }
    });
    return _animationFrame;
}


