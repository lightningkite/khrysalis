// Generated by Khrysalis Swift converter - this file will be overwritten.
// File: observables/CombineManyObservableProperty.shared.kt
// Package: com.lightningkite.khrysalis.observables
import RxSwift
import Foundation

public class CombineManyObservableProperty<IN> : ObservableProperty<Array<IN>> {
    public var observables: Array<ObservableProperty<IN>>
    public init(observables: Array<ObservableProperty<IN>>) {
        self.observables = observables
        super.init()
        //Necessary properties should be initialized now
    }
    
    override public var value: Array<IN> {
        get { return self.observables.map({ (it) -> IN in it.value }) }
    }
    override public var onChange: Observable<Array<IN>> {
        get { return xListCombineLatest(self.observables.map({ (it) -> Observable<IN> in it.observable }), combine: { (items) -> Array<IN> in items.map({ (it) -> IN in it }) }).skip(1) }
    }
}

public func xListCombined<IN, OUT>(_ this: Array<ObservableProperty<IN>>, combiner: @escaping  (Array<IN>) -> OUT) -> ObservableProperty<OUT> {
    return CombineManyObservableProperty(observables: this).map(read: combiner)
}


public func xListCombined<T>(_ this: Array<ObservableProperty<T>>) -> ObservableProperty<Array<T>> {
    return CombineManyObservableProperty(observables: this)
}


